(this["webpackJsonpreact-to-do"]=this["webpackJsonpreact-to-do"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),c=a.n(r),i=(a(82),a(64)),l=a(36),s=a(12),u=a(14),d=a(42),m=a(24),p=a(59),E=a(48),b=a.n(E),f={apiKey:"AIzaSyB8XLJVxobe_If7b7zAJaSVnC9zsFQp-AY",authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/react-to-do",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_FIREBASE_API_KEY:"AIzaSyB8XLJVxobe_If7b7zAJaSVnC9zsFQp-AY",REACT_APP_FIREABSE_AUTH_DOMAIN:"to-do-app-c8f58.firebaseapp.com",REACT_APP_FIREBASE_DATABASE_URL:"https://to-do-app-c8f58.firebaseio.com",REACT_APP_FIREBASE_PROJECT_ID:"to-do-app-c8f58",REACT_APP_FIREBASE_STORAGE_BUCKET:"to-do-app-c8f58.appspot.com",REACT_APP_FIREBASE_MESSAGE_SENDER_ID:"692418405058",REACT_APP_FIREBASE_APP_ID:"1:692418405058:web:cd0174bbac73a2cb50515b",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-FJ5XJS32G8"}).REACT_APP_FIREBASE_AUTH_DOMAIN,databaseURL:"https://to-do-app-c8f58.firebaseio.com",projectId:"to-do-app-c8f58",storageBucket:"to-do-app-c8f58.appspot.com",messagingSenderId:"692418405058",appId:"1:692418405058:web:cd0174bbac73a2cb50515b",measurementId:"G-FJ5XJS32G8"},h=Object(n.createContext)(null),g=function e(){Object(p.a)(this,e),b.a.initializeApp(f),this.auth=b.a.auth(),this.db=b.a.firestore()},v=a(60),O=a.n(v),A=a(61),S=a.n(A);var j=function(e){var t=Object(n.useState)(e.todo.data.completed),a=Object(u.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(e.todo.data.content),l=Object(u.a)(i,2),s=l[0],p=l[1],E=Object(n.useState)(!1),b=Object(u.a)(E,2),f=b[0],g=b[1],v=Object(n.useContext)(h),A={textDecoration:"line-through"};return r||(A.textDecoration=""),o.a.useEffect((function(){return console.log("update"),void v.db.collection("users").doc(v.auth.currentUser.uid).collection("todos").doc(e.todo.id).update({content:s,completed:r}).catch((function(e){console.log(e)}))}),[r,s]),o.a.createElement("div",{className:"todo-item"},o.a.createElement("input",{type:"checkbox",checked:r,onChange:function(){c(!r)}}),o.a.createElement("input",Object(d.a)({type:"text",value:s,style:Object(m.a)({},A),readOnly:!f||"",onChange:function(e){return p(e.target.value)},onDoubleClick:function(){return g(!0)},onBlur:function(){return g(!1)}},"style",f?{border:"1px solid #333333"}:{})),o.a.createElement("div",{className:"todo-item-control"},o.a.createElement("div",{onClick:function(){return g(!f)}},o.a.createElement(O.a,{color:"primary"})),o.a.createElement("div",{onClick:function(){v.db.collection("users").doc(v.auth.currentUser.uid).collection("todos").doc(e.todo.id).delete()}},o.a.createElement(S.a,{color:"primary"}))))};var w=function(e){var t=Object(n.useContext)(h),a=Object(n.useState)(""),r=Object(u.a)(a,2),c=r[0],i=r[1];return o.a.createElement("form",{className:"add-item"},o.a.createElement("input",{type:"text",value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement("button",{className:"add-button",onClick:function(e){e.preventDefault(),i(c.trim()),""!==c&&t.db.collection("users").doc(t.auth.currentUser.uid).collection("todos").add({content:c,createdAt:(new Date).toISOString(),completed:!1}),i("")}},"Add"))};a(98);var _=function(){var e=Object(n.useContext)(h),t=Object(n.useState)("all"),a=Object(u.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)([]),l=Object(u.a)(i,2),s=l[0],d=l[1],m=Object(n.useState)(""),p=Object(u.a)(m,2),E=p[0],b=p[1];return o.a.useEffect((function(){try{var t=e.auth.currentUser.uid;return e.db.collection("users").doc(t).collection("todos").onSnapshot((function(e){var t=[];e.forEach((function(e){return t.push({id:e.id,data:e.data()})})),d(t)}))}catch(a){b("Error fetching user data")}}),[e]),""!==E?o.a.createElement("div",null,"An errorr ocurred"):o.a.createElement("div",{className:"App"},o.a.createElement(w,null),o.a.createElement("div",{className:"item-categories"},o.a.createElement("div",{className:"all"===r?"category category-active":"category",onClick:function(e){c("all")}},"All"),o.a.createElement("div",{className:"unfinished"===r?"category category-active":"category",onClick:function(e){return c("unfinished")}},"Unfinished"),o.a.createElement("div",{className:"finished"===r?"category category-active":"category",onClick:function(e){return c("finished")}},"Finished")),s.sort((function(e,t){return(t=new Date(t.data.createdAt))>(e=new Date(e.data.createdAt))?-1:t<e?1:0})).map((function(e){if(!e.data.completed&&"finished"!==r||e.data.completed&&"unfinished"!==r)return o.a.createElement(j,{key:e.id,todo:e})})))},C=function(){return o.a.createElement("div",null,o.a.createElement(_,null))},y=a(138),P=a(136),I=a(141),R=a(140),x=a(139),T=a(101),D=a(134),N=a(135),B=a(142),U=a(62),W=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),k=function(){var e=Object(n.useContext)(h),t=Object(U.useHistory)(),a=W(),r={email:"",password:""},c=Object(n.useState)(r),i=Object(u.a)(c,2),s=i[0],d=i[1],p=Object(n.useState)(""),E=Object(u.a)(p,2),b=E[0],f=E[1];return o.a.createElement(N.a,{component:"main",maxWidth:"xs"},o.a.createElement(P.a,null),o.a.createElement("div",{className:a.paper},o.a.createElement(T.a,{component:"h1",variant:"h5"},"Login"),o.a.createElement("form",{className:a.form,noValidate:!0,onSubmit:function(a){a.preventDefault(),e.auth.signInWithEmailAndPassword(s.email,s.password).then((function(e){d(r),t.push("/")})).catch((function(e){"auth/wrong-password"===e.code||"auth/user-not-found"===e.code?f("Password is invalid or user does not exist"):f(e.message)}))}},o.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:s.email,onChange:function(e){return d(Object(m.a)(Object(m.a)({},s),{},{email:e.target.value}))}}),o.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:s.password,onChange:function(e){return d(Object(m.a)(Object(m.a)({},s),{},{password:e.target.value}))}}),o.a.createElement(B.a,{severity:"error",style:""===b?{display:"none"}:{}},b),o.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit},"Sign In"),o.a.createElement(x.a,{container:!0},o.a.createElement(x.a,{item:!0},o.a.createElement(R.a,{component:l.b,to:"/signup",variant:"body2"},"Don't have an account? Sign Up"))))))},F=Object(D.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),J=function(){var e=F(),t=Object(s.useHistory)(),a=Object(n.useContext)(h),r={name:"",email:"",password1:"",password2:""},c=Object(n.useState)(r),i=Object(u.a)(c,2),l=i[0],d=i[1],p=Object(n.useState)(!0),E=Object(u.a)(p,2),b=E[0],f=E[1],g=Object(n.useState)(""),v=Object(u.a)(g,2),O=v[0],A=v[1],S=function(e){var t=Object(m.a)({},l);t[e.target.name]=e.target.value,d(t);var a=!1;Object.entries(t).forEach((function(e){var t=Object(u.a)(e,2);t[0];""===t[1].trim()&&(a=!0)})),"password2"===e.target.name&&(l.password1!==e.target.value?(A("Passwords must match!"),a=!0):A("")),f(a)};return o.a.createElement(N.a,{component:"main",maxWidth:"xs"},o.a.createElement(P.a,null,o.a.createElement("div",{className:e.paper},o.a.createElement(T.a,{component:"h1",variant:"h5"},"Sign Up"),o.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),a.auth.createUserWithEmailAndPassword(l.email,l.password1).then((function(e){d(r),console.log(e),a.db.collection("users").doc(e.user.uid).set({name:l.name}),t.push("/")})).catch((function(e){A(e.message)}))}},o.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",autoFocus:!0,value:l.name,onChange:S}),o.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:l.email,onChange:S}),o.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password1",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:l.password1,onChange:S}),o.a.createElement(I.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password2",label:"Password Again",type:"password",id:"password2",value:l.password2,onChange:S}),o.a.createElement(B.a,{severity:"error",style:""===O?{display:"none"}:{}},O),o.a.createElement(y.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,disabled:b},"Sign Up")))))};function z(e){var t=e.children,a=Object(i.a)(e,["children"]),r=Object(n.useContext)(h);try{r.auth.currentUser.uid;return o.a.createElement(s.Route,Object.assign({},a,{render:function(e){e.location;return t}}))}catch(c){return o.a.createElement(s.Route,Object.assign({},a,{render:function(e){var t=e.location;return o.a.createElement(s.Redirect,{to:{pathname:"/login",state:{from:t}}})}}))}}var L=function(){return o.a.createElement(l.a,{basename:"/react-to-do"},console.log("/react-to-do"),o.a.createElement(s.Switch,null,o.a.createElement(z,{exact:!0,path:"/"},o.a.createElement(C,null)),o.a.createElement(s.Route,{path:"/login"},o.a.createElement(k,null)),o.a.createElement(s.Route,{exact:!0,path:"/signup"},o.a.createElement(J,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(h.Provider,{value:new g},o.a.createElement(L,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){e.exports=a(100)},82:function(e,t,a){},98:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.0ac64dee.chunk.js.map